<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explicación de BASE_PATH en Proyectos PHP</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; background-color: #f4f4f4; color: #333; }
        .container { max-width: 900px; margin: auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1, h2, h3 { color: #0056b3; }
        pre { background: #e9e9e9; padding: 15px; border-radius: 5px; overflow-x: auto; }
        code { font-family: "Courier New", Courier, monospace; background: #e9e9e9; padding: 2px 4px; border-radius: 3px; }
        .note { background-color: #e0f7fa; border-left: 5px solid #00bcd4; padding: 10px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Explicación de <code>BASE_PATH</code> en Proyectos PHP</h1>

        <p>En el desarrollo de aplicaciones PHP, la gestión de rutas de archivos puede volverse compleja, especialmente en proyectos con una estructura de directorios modular. La constante <code>BASE_PATH</code> es una solución común y efectiva para abordar este desafío.</p>

        <h2>¿Qué es <code>BASE_PATH</code>?</h2>
        <p><code>BASE_PATH</code> es una constante definida por el desarrollador que almacena la <strong>ruta absoluta al directorio raíz del proyecto</strong>. Su propósito principal es servir como un punto de referencia fijo para todas las inclusiones de archivos (<code>require</code>, <code>include</code>, <code>require_once</code>, <code>include_once</code>) dentro de la aplicación.</p>

        <h2>¿Por qué es Necesario <code>BASE_PATH</code>? El Problema de las Rutas Relativas</h2>
        <p>Considera la siguiente estructura de proyecto:</p>
        <pre><code>
/mi_proyecto/
├── index.php
├── config/
│   └── database.php
└── src/
    └── controllers/
        └── UserController.php
        </code></pre>
        <p>Si en <code>UserController.php</code> intentas incluir <code>database.php</code> usando una ruta relativa como <code>require_once '../../config/database.php';</code>, esto podría funcionar si <code>UserController.php</code> se ejecuta directamente o si el script principal está en la raíz. Sin embargo, si <code>UserController.php</code> es incluido por otro archivo en un nivel diferente, la ruta relativa se resolverá de forma incorrecta, llevando a errores de "archivo no encontrado".</p>
        <p>Las rutas relativas son problemáticas porque su resolución depende del "directorio de trabajo actual" (Current Working Directory - CWD) del script que se está ejecutando, no del archivo que contiene la sentencia <code>require_once</code>.</p>

        <h2>La Solución: Rutas Absolutas con <code>BASE_PATH</code></h2>
        <p>Al definir <code>BASE_PATH</code> al inicio de tu aplicación, puedes construir rutas absolutas a cualquier archivo, garantizando que PHP siempre lo encuentre, sin importar desde dónde se llame el script.</p>

        <h3>Definición Típica de <code>BASE_PATH</code></h3>
        <p><code>BASE_PATH</code> se define generalmente en el archivo de entrada principal de la aplicación (ej. <code>index.php</code> o <code>src/Core/Main.php</code> en este proyecto), utilizando la constante mágica <code>__DIR__</code>.</p>
        <pre><code>
// En src/Core/Main.php (o tu archivo de entrada principal)
// Define la ruta base del proyecto
define('BASE_PATH', __DIR__ . '/../../'); // Ajusta según la ubicación de Main.php respecto a la raíz
// O si Main.php está en la raíz: define('BASE_PATH', __DIR__ . '/');
        </code></pre>
        <p>En el contexto de este proyecto `TP-Inventario`, si `Main.php` está en `src/Core/`, y la raíz del proyecto es `/TP-Inventario/`, entonces `__DIR__` (que sería `/TP-Inventario/src/Core/`) necesita subir dos niveles para llegar a la raíz. Por eso, `__DIR__ . '/../../'` es una forma común de definirlo.</p>

        <h3>Uso de <code>BASE_PATH</code></h3>
        <p>Una vez definida, puedes usar <code>BASE_PATH</code> para incluir cualquier archivo:</p>
        <pre><code>
// Ejemplo de uso en cualquier parte del proyecto
require_once BASE_PATH . 'src/Database/bd.php';
require_once BASE_PATH . 'config/app_config.php';
require_once BASE_PATH . 'src/Models/Repuesto.php';
        </code></pre>
        <p>Esto asegura que, por ejemplo, `bd.php` siempre se buscará en la ruta absoluta `[ruta_a_tu_proyecto]/src/Database/bd.php`.</p>

        <h2>Beneficios de Usar <code>BASE_PATH</code></h2>
        <ul>
            <li><strong>Fiabilidad:</strong> Las inclusiones de archivos son siempre correctas, eliminando errores de rutas.</li>
            <li><strong>Portabilidad:</strong> El código es más fácil de mover entre diferentes entornos o servidores, ya que no depende de rutas relativas específicas.</li>
            <li><strong>Claridad:</strong> Mejora la legibilidad del código al hacer explícita la ubicación de los archivos en relación con la raíz del proyecto.</li>
            <li><strong>Mantenibilidad:</strong> Simplifica la refactorización de la estructura de directorios, ya que solo necesitas ajustar la definición de <code>BASE_PATH</code> si la ubicación del archivo de entrada principal cambia.</li>
        </ul>

        <div class="note">
            <strong>Nota Importante:</strong> Para que <code>BASE_PATH</code> funcione correctamente, debe ser definida <strong>una única vez</strong> y lo más temprano posible en el ciclo de vida de la aplicación, idealmente en el archivo de entrada principal que se ejecuta primero.
        </div>
    </div>
</body>
</html>